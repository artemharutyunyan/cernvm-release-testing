\chapter{\cernvmreleasetesting Test Client Platform Setup}
\label{sec:testclientsetup}

\section{Introduction}
The intent of this document is to provided a step-by-step guide on setting up an entire \cernvmreleasetesting\ infrastructure, including 
instructions on how to set up and configure test clients, the main server running the web interface and database, as well as writing and 
executing tests. If you are new to release testing and want a document to guide you through the entire process of setting up a working
 \cernvmreleasetesting\ infrastructure, then this guide for you.

This section provides complete step by step instructions on how to setup and configure the test clients which are part of a basic working
\releasetesting environment by outlining the procedure for setting up test clients on numerous platforms, hence why this is called a 
\emph{walkthrough} document. This guide is intended for users familiar enough with computers and desktop environments to enter basic commands
in a terminal and install various operating systems. 

As this guide is directed towards users who are new to \cernvmreleasetesting and \tapper and
are interested in quickly getting a \cernvm testing infrastructure quickly set up, many assumptions regarding the requirements necessary are 
made.As is the case, these instructions are provided for a generalized audience based on our own experience and the requirements that we feel 
most users will have, \emph{so feel free to deviate from the instructions}. 




\newpage
\section{Windows 7 Test Client Setup}
\subsection{Installing the system}
\label{sec:windows7install}
\flushleft
\begin{enumerate}
\item	First, begin by booting the computer with the Windows 7 installation CD and when it boots to the installation screen leave the default
		settings as ``English'' and the keyboard as ``US'' and click ``Next'' to continue the installation.
		
\item	At the next screen, click the ``Install now'' button to begin the installation, if you prefer to read the pre-installation 
		instructions click the  ``What to know before installing Windows'' to find out more.
		
\item	Next, you must read through and agree to the End User License Agreement, \emph{make sure you read through the EULA and agree to
		the terms}, then select the option ``I accept the license agreement'' and click ``Next'' to continue the installation.
		
\item	At the next stage of the installation, titled ``Which type of installation do you want?'' click the second option
		``Custom (advanced)'' to begin a custom installation.
		
\item	At the next stage of the installation, titled ``Where do you want to install Windows?'', if you only have one drive, which is
		empty simply click on the drive in the list which you want to install Windows 7 on. Otherwise, if you have more complex
		configurations, such as other Windows partitions click the option ``Drive options (advanced)'' and select the appropriate
		partition and drive to install Windows 7 on. \emph{If you have other partitions with Linux or other non-Windows operating
		systems, you will no longer be able to boot from those partitions}. This is because the Master Boot Record will overwritten
		by the Windows 7 boot loader and in in most cases this will involve reinstalling GRUB, which is beyond the scope of this 
		document.
	  
\item	The next part of the installation is automatic, Windows 7 will now begin copying the files to the system, rebooting when 
		necessary, and execute almost the entire Windows 7 installation automatically.
		
\item	Now, after most of the installation has completed automatically, you will now be at the final stages of the installation,
		which begins by asking for a ``user name'' and ``computer name'' for the computer. Enter a user name that is simple
		and relevant such as \emph{cernvm} and enter a relevant computer name for the machine based on the hardware or operating system 
		it is running. The computer name should be relevant and unique to better identify the system, a good naming convention should refer
		to the hardware or operating system and call it a host to differentiate from the virtual machine that will be running as a guest, 
		for example a hostname such as \emph{cernvm-win7-host} could be used, {\bf whatever convention you use make sure it is consistent}.

\item	Now, at the next stage of the installation, titled ``Set a password for your account'' set the password to something
		you will not forget and is fairly complex with numbers and letters. But, most importantly {\bf keep the username and password 
		consistent across all systems created as part of the infrastructure} as it makes administration and everything else 
		much easier.
	  
\item	At the next stage of the installation, titled ``Type your product key for activation'', enter your product key for Windows 7
		and enable the option ``Automatically activate Windows 7 when I'm online''. Alternatively, if you do not have a license for
		Windows 7 you may leave the product key blank, and disable the option ``Automatically activate Windows 7 when I'm online'',
		this will allow for a 30 day trial of Windows 7, {\bf but is not advisable as the system will be not be suitable as a 
		test client after the trial expires}.
		
\item	At the next stage of the installation, titled ``Help protect your computer and improve Windows automatically'', select the option
		``Ask me later'', \emph{this is important as we will configure the system later for manual control of updates, and to remove
		security and error reporting prompts, which is necessary for setting up a test client}.
		 
\item	Next, at the installation stage titled ``Review your time and date settings'' select the correct time zone from the drop down menu,
		such as CEST, and enable the option ``Automatically adjust clock for Daylight Saving Time'', and finally, ensure that the date
		and time are correct for the system.
		

\item	Finally, at the last stage of the installation titled, ``Select your computer's current location'' select the option ``Work 
		network'',\emph{this is very important for networking configurations and virtual machine networking}.
\end{enumerate}


\newpage
\subsection{Configuring the system}
\label{sec:windows7config}
\begin{enumerate}
\item	Now that the Windows 7 installation has completed the first step in configuring the system is to remove unnecessary prompts,
		which is necessary for setting up a test client. Begin by going to the control panel from \verb|Windows Logo -> Control Panel|
		and set the ``View by:'' option to ``Small icons'' as this will make it easier to find configuration options.
		
\item	Next, begin by disabling User Account Control (UAC)\footnote{UAC is the annoying prompt which asks you to authenticate certain
		actions and must be removed for services such as VNC, SSH, and running tests to work} from the control panel select ``User Accounts''.
		Then select the option ``Change user account control settings'' and slide the bar down to the bottom, this turns UAC off, then click
		``OK'' to apply the changes.
		
\item	Next, disable automatic updates to prevent updates conflicting with testing and to provide control over when to apply Windows 7 updates,
		go to the control panel and select ``Windows Update'', then select the option "Change settings" and then from the drop down select the 
		option ``Never check updates'' then click ``OK'' to apply the changes.
		
\item	Next, disable Windows Defender, which will conflict with testing and cause other issues, begin by going to the control panel and 
		selecting ``Windows Defender'', then click ``Tools'', \emph{if for some reason you cannot access the ``Tools'' option for
		Windows Defender then ignore this step and continue}. Otherwise, click ``Options'', under ``Administrator options'', select or clear 
		the ``Use Windows Defender'' check box and click ``Save'' to apply the changes. You may be prompted for an administrator password or 	
		confirmation, simply type the password or provide confirmation.
		
\item	Next, disable the Windows Firewall, which will conflict with testing and cause issues such as blocking virtual machine connections 
		and testing services\footnote{This may seem like an unwise security decision, but this guide assumes that the test client has been
		setup in a work environment, which should already have an industry grade firewall that is far superior to Windows Firewall}.
		Begin by navigating to the control panel and select ``Windows Firewall'', then click the option ``Turn Windows Firewall on
		or off'' and for each available firewall configuration, ensure that the option ``Notify me when Windows Firewall blocks a new
		program'' is unchecked and that the option ``Turn off Windows Firewall (not recommended)'' is selected, then click ``OK'' to
		apply the changes.
		
\item	Next, disable Action Center prompts which conflict with testing, begin by going to the control panel and selecting ``Action Center''
		then select the option ``Change Action Center settings''. This will bring up the option to turn messages on or off, {\bf uncheck all of 
		the ``Security messages'' and ``Maintencance messages''} such as ``Windows Update'' and ``Virus Backup'', then click ``OK'' to apply
		the changes.
		
\item	Next, disable error reporting and customer experience improvement messages by again going to the control panel and selecting 
		``Action Center'' then select the option ``Change Action Center settings''. This will bring up the previous menu from the last
		previous step, this time under the section ``Related settings'' do the following.
\begin{itemize}	
\item[a.]	Click ``Customer Experience Improvement Program settings'' and ensure that it is set to ``No, I don't want to participate in
			the program'' and then click ``Save Changes'', you may be prompted for an administrator password or confirmation, simply type
			the password or provide confirmation.
			
\item[b.]	Next, click ``Problem reporting settings'' and ensure that it is set to ``Never check for solutions (not recommended)'' and
			then click ``Change report settings for all users'' and ensure that it is set to ``Never check for solutions (not recommended)''
			as well and click ``OK''. You may be prompted for an administrator password or confirmation, simply type the password or provide
			confirmation.
\end{itemize}	

\item	Now that Windows 7 has been configured to remove unnecessary prompts, the next steps involve performance enhancements and installing
		and configuring necessary software, begin by going to the control panel and select ``Power Options'' then select the option 
		``High Performance''. Next click the option ``Change plan settings'' and ensure that the option ``Put the computer to sleep'' is
		set to `Never'' then click ``Change advanced power settings'' and ensure that the following options are set.
\begin{itemize}
\item	Disable require password on wakeup
\item	Set hard disk to never turn off
\item	Ensure that the options ``Enable wakeup timers'' is enabled
\item	Ensure that the option ``hibernate'' is enabled
\item	Ensure that computer never hibernates
\item	Allow hybrid sleep
\end{itemize}

\item	Next, disable search indexing\footnote{Which does have an impact on disk I/O and is important to virtualized testing where you have
		several virtual machines running using the same physical disk}, begin my clicking \verb|Start -> Computer| and then right click 
		on the 	``Local Disk (C:)'' drive and select ``Properties'' and then uncheck the option ``Allow files on this drive to have contents
		indexed\ldots{}'' and click ``Apply'' to apply the changes, it may take several minutes for the indexes to be removed.
		
\item	Next, from the control panel select ``Administrative Tools'' and click ``Services'' to launch the Windows services administration tool,
		then disable the following unnecessary services by double clicking on each entry, setting the ``Startup type:'' to ``Disabled'' and
		clicking ``Apply''.
\begin{itemize}
\item	BitLocker Drive Encryption Service
\item	Bluetooth Support Service
\item	Remote Registry
\item	Tablet PC Input Service
\item	Windows Biometric Services
\item	Windows Defender
\item	All Windows Media services
\item	Windows Search
\end{itemize}

\item	Next, since this is a test client and Windows Aero and other Windows aesthetic effects are not needed, disable graphics effects and
		enhancements. Begin by going to the control panel and select ``Performance Information and Tools'' and select the option ``Adjust
		visual effects'', then select the option ``Adjust for best performance'' and click ``Apply'' to apply the changes.
		
\item	Next, since some of the necessary drivers for graphics support and other devices may have not been installed automatically begin
		by updating the system, from the control panel select ``Windows Update'', then click the button ``Check for updates'' to check
		for the latest updates, including driver updates. Select from both the regular and recommended updates available any drivers
		listed as they are specific to the system, also if you wish to install updates for the system now, select the updates from the
		list {\bf EXCEPT for update KB971033 which is known to cause issues even with genuine copies of Windows}. Then click ``Apply'' 
		to apply the updates and restart the system after the updates have completed, if you wish to install the latest Windows 7 Service
		Pack you will have to repeat the update procedure after the system restarts.
		
\item	Now that the necessary drivers for the system have been installed, and perhaps the updates as well, the next step is to disable
		Windows 7 from automatically selecting the drivers for the system, which can conflict with the drivers installed by the
		virtualization hypervisors. Begin by going to the control panel and select ``System'' then select the option ``Advanced
		system settings'' and in then click the ``Hardware'' tab. Now, click the ``Device Installation Settings'' button and
		set only the following two options ``No, let me choose what to do'' and ``Never install driver software from Windows
		Update'' then click ``Save Changes''. You may be prompted for an administrator password or confirmation, simply 
		type the password or provide confirmation.
		
		
\item	Next, since not all versions of Windows 7 include remote desktop support, TightVNC Server will be used instead, begin
		by navigating to control panel and select ``System'' then the option ``Remote settings'' ensure that the option
		``Allow Remote Assistance connections to this computer'' is disabled and that the option ``Don't allow connections
		to this computer'' then click ``Apply''.
		
\item	Now, download the latest version of TightVNC for Windows from the following location:\url{http://www.tightvnc.com/download.php}
		and ensure that you download the ``Self-installing package''. Next, execute the installer and simply click ``Next'' and agree
		to the license agreement, then at the ``Choose Components'' stage of the installation select only ``TightVNC Server'' from
		the list and click ``Next'' until you get to the ``Select Additional Tasks'' stage of the installer and ensure that the
		option ``Set passwords for the service before finishing the installation'' is disabled.
		
\item	Finally, configure Windows 7 to login automatically on start, begin by click the Windows logo and typing ``run'' and then press
		enter in the search box, next in the ``Run'' dialog box, type in \emph{\bf control userpasswords2} and press enter. This will
		display the ``User Accounts'' window, uncheck the option ``Users must enter a user name and password to use this computer''
		and click ``OK''. You will then be prompted to enter the current password and confirm it, after doing so, you will no longer 
		be prompted to enter your password to login on the system.

\item	Now that the system has finally been configured for testing\footnote{Hey, it's Windows, you didn't expect this to be a cakewalk
		did you?} reboot the system and ensure that the following work.
\begin{itemize}
\item	It automatically boots up into the full desktop environment without having to login
\item	You have VNC access to the machine and can control the system using VNC	
\end{itemize}
\end{enumerate}


\newpage
\subsection{Installing and configuring the hypervisors}
\subsection{Configuring the CernVM Image}
\subsection{Installing and configuring Cygwin}
%TODO: ADD INSTRUCTIONS FOR SETTING UP CYGWIN ENVIRONMENT, WHICH IS NECESSARY TO RUN TEST SUITE
%		THE CYGWIN ENVIRONMENT REQUIRES THE FOLLOWING TO RUN TEST SUITES
%		-> BASH
%		-> ALL UNIX UTILITIES (GREP, WGET, CURL, SSH, AWK, SED, NETCAT, TEST, FIND, ...)
%		-> PERL, THE ISSUE WILL BE TO USE STRAWBERRY PERL (WINDOWS ENVIRONMENT) OR PERL 5
%			RUNNING IN THE CYGWIN ENVIRONMENT
%
%TODO:	ADD INSTRUCTIONS FOR SETTING UP SSH ON WINDOWS (THROUGH CYGWIN)
\subsection{Setting up the Tapper Test Suite}




\newpage
\section{Red Hat Based Test Client Setup}
\subsection{Installing the system}
\label{sec:rhinstall}
\flushleft
\begin{enumerate}
\item First, begin by booting the fedora CD and when it boots into the desktop environment click the icon on the desktop which says
	  ``Install to hard drive''.
	  
\item	For the first steps of installer, when it asks for the language settings just leave it as the default (english)

\item 	At the next menu option, for the type of device the installation will involve, leave the default option ``Basic Storge Devices''

\item 	At the next menu, where you have to select the drive to install the operating system on, select your hard drive from the list
	  	\emph{you can usually determine which drive to use based on the model and capacity columns}\footnote{ The device naming convention
	  	for Linux usually labels a hard drive starting with the first two characters as `sd' or `hd', and a third character from a to z 
	  	( sd[a-z] or hd[a-z] )} then click ``next''.
	  
\item 	When prompted to enter the hostname for the computer, enter a relevant hostname for the machine based on the hardware or operating
		system it is running; the hostname should be relevant and unique as \tapper will use this hostname to identify the system. A good naming
		convention should refer to the hardware or operating system and call it a host to differentiate from the virtual machine that will be
		running as a guest\footnote{This will make more sense later when you have to create and configure CernVM images}, for example a hostname such
		as \emph{cernvm-redhat5-host} could be used, {\bf whatever convention you use make sure it is consistent}.
		
\item	Next, select the appropriate city/timezone from the list and ensure that the option ``system clock uses UTC'' is selected

\item	When prompted to enter the password for the root password, set the root password to something you will not forget and is fairly
		difficult with numbers and letters. {\bf Again, whatever password you use,  make sure it's consistent as you will frequently
		use this account}.
		
\item	Next, for the installation type, select ``Use All Space'' to have the installer format the drive and automatically partition/configure
		the drive for you, {\bf do not use this option if you have data on the hard drive as everything will be deleted}. Furthermore, if you
		want to manually configure the partitions, or don't want to use LVM\footnote{Logical Volume Manager, it is very beneficial for complex
		disk configurations and arrays, but for our needs is nothing more than a headache} (I don't) then select ``Create Cusom Layout''
		and follow the instructions below.
		
\begin{itemize}
\label{sec:rhmanualdrive}
\item[a.]	From the list select your hard drive (it should be sda) and click create to create a new partition. Select a ``Standard Partition''
			and click create.

\item[b.]	For the ``Mount Point'' option select from the drop down list, `/' and for the ``File System Type'' select ext4. Then for the 
			``Size (MB)'' option set the size (in megabytes) as the size of the free space on the hard drive minus double the amount of RAM 
			installed on the system\footnote{This is a general rule of thumb to create a swap partition twice the size of your RAM}. For 
			example, if you	have 2GB of RAM installed on the system, then you would subtract 4096 from the size of the hard drive. 
			Finally, select the option ``Force to be primary partition'' and click OK.

\item[c.]	From the list select the remaining free space and click create, then select a ``Standard Partition'' and click create

\item[d.]	For the "File system type" select swap and then select the options ``Fill to maximum allowable size'' and ``Force to be primary
			partition'' and click OK.
			
\item[e.]	Now, back at the menu select ``next'' and the partitions will now be created
\end{itemize}

\item	At the next stage in the installer, ensure that the option ``Install boot loader on /dev/\ldots'' is selected as this will install
		the boot loader to the MBR\footnote{Master Boot Record, normally it is the first 512 bytes located at the first sector of a hard 
		drive}, and click ``next''.
		
\item	After the installation has completed, reboot the machine and make sure to remove the installation CD before the computer boots.

\item	Now, when the computer boots with the installation CD removed, you will begin the final stages of the installation procedure.
		
\item	When prompted to enter a username for the new user to be created on the system, set the username as something simple and relevant
		such as \emph{cernvm} and the password to something you will not forget and is fairly complex with numbers and letters. But, most 
		importantly {\bf keep this username and password consistent across all systems created as part of the infrastructure} as it makes 
		administration and everything else much easier.
		
\item	At the next stage, for setting the date and time, enable the option ``sychronize date and time over the network'' to use an NTP
		server\footnote{Network Time Protocol, this is very important and required for keeping all the test clients, CernVM images,
		and test results synchronized}, and select one of the NTP servers listed, or add one of the \cern dedicated NTP servers.
		
\item	Click finish, and if you are prompted to send a profile, and wish to assist the developers select ``send profile''.
\end{enumerate}


\newpage
\subsection{Configuring the system}
\label{sec:rhconfig}
\begin{enumerate}
\item 	After the system has booted remove the follow unnecessary startup applications by selecting from the menu  
		\verb|System -> Preferences -> Startup Applications|
\begin{itemize}
\item	bluetooth
\item	evolution alarm
\item	Gnome Login Sound
\item	PackageKit Update Applet
\item	print queue
\item	screensaver
\item	visual assistance/aid
\item	volume control
\item	any others you think are unnecessary based on your own discretion
\end{itemize}

\item	Next enable and configure the remote desktop from the menu \verb|System -> Preferences -> Remote Desktop| and ensure
		that the following options are configured	
\begin{itemize}
\item	Enable the option ``Allow others to view your desktop''
\item	Enable the option ``Allow other users to control your desktop''
\item	Disable the option ``You must confirm access to this machine''
\end{itemize}

\item	Next enable SSH access to the machine, in order for SSH and VNC access to work the firewall will have to be disabled
\begin{itemize}
\item[a.]	First disable the firewall from the menu \verb|System -> Adminisration -> Firewall| and click the ``Disable'' 
			button and then click ``Apply'' to apply the changes! {\bf This is a quick solution for now because it's too 
			much work to configure the firewall for VNC, SSH, Apache, MySQL, PHPMyAdmin, MCP, and all the other network 
			daemons and should not be a problem if this is just being accessed internally}.

\item[b.]	Now that the firewall is disabled, configure sshd, the ssh daemon, to run on startup

\begin{lstlisting}
$ su -c "chkconfig --level 345 sshd on"
\end{lstlisting}
\end{itemize}

\item	Next, configure the system to login automatically at boot
\begin{itemize}
\item[a.]	Edit the login screen configuration file for gdm using the following command
\begin{lstlisting}
$ su -c "gedit /etc/gdm/custom.conf"
\end{lstlisting}

\item[b.]	Then in the custom.conf file, put the following under the heading [daemon], which will automatically
			log the system in as the user you created, \emph{make sure you replace the user cernvm with the user
			that you created}.

\lstset{language=bash,caption=Configure Automatic Login}
\begin{lstlisting}
AutomaticLoginEnable=true
AutomaticLogin=cernvm
TimedLoginEnable=true
TimedLogin=cernvm
TimedLoginDelay=0
\end{lstlisting}		
\end{itemize}

\item	Next, configure the screen saver from the menu \verb|System -> Preferences -> Screensaver| and ensure that
		the following options are configured
\begin{itemize}
\item	Disable the option ``Lock screen when screensaver active''
\end{itemize}

\item	Now, reboot the machine, and ensure that the following work
\begin{itemize}
\item	It automatically boots up into the full desktop environment without having to login
\item	You have access to the machine using SSH and can login on the root account
\item	You have VNC access to the machine and can control the system using VNC	
\end{itemize}

\item	Finally, update the system from the menu \verb|System -> Administration -> Software Update| and after it has 
		completed the updates reboot the system
\end{enumerate}


\newpage
\subsection{Installing libvirt and virsh}
\label{sec:rhvirsh}
\begin{enumerate}
\item	The virtualization API libvirt and the command line tool virsh~\cite{libvirt} are the essential components required 
		for setting up a test client and must be installed and properly configured before any testing can begin. Ensure that
		you follow the proceeding directions carefully and validate that virsh is working properly before proceeding to 
		install and configure the various hypervisors.
		
\item	First, begin by reviewing the release news listed on the libvirt website, \url{http://libvirt.org/news.htm} and read 
		through the release notes for the latest version released to make sure that there are no regressions or deprecated 
		support for the platforms you wish to support. If you intend to set up an entire infrastructure and support all of the
		\cernvm virtualization platforms, which would include \emph{Xen, KVM, VirtualBox, and VMware}, then you must download
		a version later than \emph{0.8.7} as there was no support for VMware prior to that release.

\item	Next, download the latest release that is a {\bf src.rpm} file from the libvirt release server, 
		\url{http://libvirt.org/sources/} based on the latest release which does not have any regressions or deprecations for
		the virtualization platforms you wish to support~\footnote{This shouldn't be an issue but just in case there is a 
		newer version in which Xen support is deprecated, then you would need to use the last release which has Xen support}.
		As of this date, the latest release of libvirt is version 0.9.2, this is the release that will be used for the
		following instructions and examples.
		
\item	Next, install the following dependencies which are required to generate the libvirt rpm files from the src.rpm file
		that was downloaded, \emph{from now on execute all commands as root}.
		
\lstset{language=bash,caption=Install src.rpm Dependencies}
\begin{lstlisting}
# Change to root account, enter password if prompted
$ su

# Install dependencies for using a src.rpm
$ yum install rpm rpm-devel rpm-libs rpmdevtools rpm-python \
rpm-build rpmrebuild
\end{lstlisting}

\item	Next, install the following dependencies which are required to install libvirt.

\lstset{language=bash,caption=Install libvirt Dependencies}
\begin{lstlisting}
# Change to root account, enter password if prompted
$ su

# Install dependencies for libvirt
$ yum install xhtml1-dtds readline-devel ncurses-devel gettext augeas \
libpciaccess-devel yajl-devel libpcap-devel avahi-devel radvd \
cyrus-sasl-devel parted-devel libcap-ng-devel libssh2-devel \
audit-libs-devel systemtap-sdt-devel gnutls-utils gnutls-devel \
python-devel xen-devel libudev-devel libnl-devel device-mapper-devel \
numactl-devel netcf-devel libcurl-devel libcgroup
\end{lstlisting}
	
\item 	Next, create the libvirt RPM installation files using the following command, replace the src.rpm file
		shown in the example with the file you downloaded previously.

\lstset{language=bash,caption=Create libvirt RPM Files}
\begin{lstlisting}
# Change to root account, enter password if prompted
$ su

$ rpmbuild --rebuild libvirt-0.9.2-1.fc14.src.rpm
\end{lstlisting}

\item	Finally, install the libvirt RPM files by navigating to the \verb|/root/rpmbuild/RPMS| folder and
		then changing to the directory for your computer architecture \emph{such as x86\_64}. Then install
		the files in the same order as shown in the example, replacing the version of src.rpm file shown in 
		the example	with the version of the files in your directory, most importantly install the files
		in the following order: \emph{libvirt-client, libvirt-devel, libvirt-python, libvirt}. Finally,
		if a package does not install or complains about conflicts use the \emph{--force} argument to
		force the installation.

\lstset{language=bash,caption=Install libvirt}
\begin{lstlisting}
# Change to root account, enter password if prompted
$ su

# Change to location of RPM files
$ cd /root/rpmbuild/RPMS/x86_64/

# Install the files in the following order, if install
# fails or has conflicts use   rpm -iv --force   
$ rpm -iv libvirt-client-0.9.2-1.fc13.x86_64.rpm 
$ rpm -iv libvirt-devel-0.9.2-1.fc13.x86_64.rpm
$ rpm -iv libvirt-python-0.9.2-1.fc13.x86_64.rpm
$ rpm -iv libvirt-0.9.2-1.fc13.x86_64.rpm
\end{lstlisting}

\item 	Finally, start the service libvirtd, and ensure that virsh installed correctly and is running by 
		connecting to the test hypervisor and ensuring that the test virtual machine, named ``test'' is running.

\lstset{language=bash,caption=Verify virsh was Installed Properly}
\begin{lstlisting}
# Change to root account, enter password if prompted
$ su

# Verify virsh is working, test should be running
$ service libvirtd start
$ virsh -c test:///default list --all
\end{lstlisting}
\end{enumerate}


\newpage
\subsection{Installing and configuring KVM}
\label{sec:rhkvm}
\begin{enumerate}
\item	The first step is to install the KVM hypervisor, start by installing KVM and the other additional packages such
		as virt-manager, which is a graphical management tool and virt-install, which is a command line interface (CLI)
		virtual machine creation/installation/configuration tool using the following commands with root privileges. If
		you receive a message that a package is already installed then simply continue.

\lstset{language=bash,caption=Installing KVM and Other Related Programs}
\begin{lstlisting}
$ yum install virt-manager qemu-kvm python-virtinst virt-viewer
\end{lstlisting}

\item	Next, verify that KVM has been installed properly and that virsh can connect to the KVM hypervisor using the
		following command, if you are able to connect to the virsh console without any errors then virsh is able
		to connect to the KVM hypervisor.

\lstset{language=bash,caption=Verify that virsh can Access KVM}
\begin{lstlisting}
$ su
$ virsh -c qemu:///session
\end{lstlisting}

\item	Now, proceed to download and extract the desired KVM virtual machine image onto the system from the \cernvm download 
		portal, url{http://cernvm.cern.ch/portal/downloads} it is recommended that you download the KVM Basic image for your 
		architecture. For this guide the basic image will be downloaded as it is the most practical image for the majority of 
		users.
		
\lstset{language=bash,caption=Download and Extract CernVM KVM Basic Image}
\begin{lstlisting}
$ wget http://rbuilder.cern.ch/downloadImage?fileId=1719
$ gunzip cernvm*.gz
\end{lstlisting}

\item 	Now, to ensure that KVM is properly configured and installed, follow this guide provided on the CernVM website
		\url{http://cernvm.cern.ch/portal/kvm} {\bf except, instead use the following virtual machine definition file to 
		create the virtual machine}. \emph{You will need to change the following XML tags in the configuration file accordingly}
\begin{itemize}
\item \verb|<uuid>| by generating a uuid using the uuid command
\item \verb|<source file>| according to wherever you extracted the cernvm kvm image
\item \verb|<mac address>| not a necessity, but change it to something slightly different
\end{itemize}

\lstset{language=bash,caption=Create CernVM KVM Definition File}
\begin{lstlisting}
# Install uuid tool and generate uuid
$ su -c "yum install uuid"
$ uuid

# Create the cernvm.xml definition file and set the XML tags accordingly
$ gedit cernvm.xml

<domain type='kvm'>
  <name>cernvm</name>
  <uuid>b32147e7-9b89-dda9-b15d-53ba5f54f590</uuid>
  <memory>524288</memory>
  <currentMemory>524288</currentMemory>
  <vcpu>1</vcpu>
  <os>
    <type arch='x86_64' machine='pc-0.12'>hvm</type>
    <boot dev='hd'/>
  </os>
  <features>
    <acpi/>
    <apic/>
    <pae/>
  </features>
  <clock offset='utc'/>
  <on_reboot>restart</on_reboot>
  <on_crash>restart</on_crash>
  <devices>
    <emulator>/usr/bin/qemu-kvm</emulator>
    <disk type='file' device='disk'>
      <driver name='qemu' type='raw'/>
      <source file='/home/cernvm/image/cernvm-2.3.0-x86_64.hdd'/>
      <target dev='hda' bus='ide'/>
      <address type='drive' controller='0' bus='0' unit='0'/>
    </disk>
    <controller type='ide' index='0'>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' 
      function='0x1'/>
    </controller>
    <interface type='network'>
      <mac address='52:54:00:ca:d5:d3'/>
      <source network='default'/>
      <target dev='vnet0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' 
      function='0x0'/>
    </interface>
    <serial type='pty'>
      <target port='0'/>
    </serial>
    <console type='pty'>
      <target type='serial' port='0'/>
    </console>
    <input type='mouse' bus='ps2'/>
    <graphics type='vnc' port='-1' autoport='yes'/>
    <video>
      <model type='cirrus' vram='9216' heads='1'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x02'
      function='0x0'/>
    </video>
    <memballoon model='virtio'>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x04'
      function='0x0'/>
    </memballoon>
  </devices>
</domain>
\end{lstlisting}

\item	Finally, configure the the virtual machine network to automatically start when the system boots, then create
		the virual machine and ensure that it can be started and stopped using virsh, \emph{all virsh commands require
		root privileges, so it's easiest to simply run as as root}.
		
\lstset{language=bash,caption=Configure the Virtual Machine and Verify it Works}
\begin{lstlisting}
$ su
$ virsh -c qemu:///system 
$ net-autostart default
$ define /home/cernvm/image/cernvm.xml

# Verify the virtual machine was added, should be in list
$ list --all

# Verify the virtual machine can be turned on/off
$ start cernvm
# Wait about 2 minutes for the system to boot
$ shutdown cernvm
\end{lstlisting}
\end{enumerate}


\newpage
\subsection{Installing and configuring VirtualBox}
\label{sec:rhvbox}
\begin{enumerate}
\item	First, begin by downloading the latest version of VirtualBox from the VirtualBox download page,
		\url{http://www.virtualbox.org/wiki/Downloads} ensure that you select the appropriate Red Hat based
		distribution, version and architecture for your system. The following instructions for this section of
		the guide uses VirtualBox 4.0.10 for Fedora 13, AMD64.
		
\item	Next, after downloading the latest version of VirtualBox for your distribution install VirtualBox as the root
		account using the following command.
\begin{lstlisting}
# Enter the root password when prompted
$ su
$ rpm -iv VirtualBox-*.rpm
\end{lstlisting}	

\item	Next, in order to use VirtualBox and have full access to the drivers needed for USB support, ensure that the root
		account belongs to the group ``vboxusers''. Begin by navigating to \verb|System -> Users and Groups| and then from
		the ``User Manager'' window click the ``Groups'' tab, under the column ``Group Name'' for the group ``vboxusers'' 
		ensure that root is one of the group members. If the root account is not a group member of ``vboxusers'' highlight
		the ``vboxusers'' entry and click the ``Properties'' button, then enable the root account from the list of users
		and click ``OK'' to apply the changes.
		
\item	Due to an issue with VirtualBox\footnote{The issues is that VirtualBox looks for virtual machine configuration files (*.vbox)
		in the ``VirtualBox VMs'' folder of the user that launched VirtualBox. The issue is worsened by the fact that there can
		only be one ``VirtualBox VMs'' folder which causes conflicts with multiple users.}, in order for it to work with virsh 
		the virtual machine(s) must be created and configured as the root account, otherwise when you try to connect or start a 
		VirtualBox virtual machine with virsh you will get an ``unknown error'', which is obviously very vague and difficult to 
		resolve. {\bf Therefore ALWAYS start VirtualBox as the root account using the following procedure}.

\lstset{language=bash,caption=Always Start VirtualBox as Root}
\begin{lstlisting}
# Switch to the root account, enter root password
$ su

# Start VirtualBox as root
$ virtualbox
\end{lstlisting}

\item	Next, to verify that VirtualBox has been installed properly and that virsh can connect to the VirtualBox hypervisor, 
		verify that the VirtualBox module, \emph{vboxdrv} has been loaded and that you are able to connect to the virsh console 
		without any errors.

\lstset{language=bash,caption=Verify that virsh can Access VirtualBox}
\begin{lstlisting}
$ su

# Verify that the vboxdrv module is loaded
$ lsmod | grep -i vboxdrv

# Verify that virsh can connect to virtualbox
$ virsh -c vbox:///session
\end{lstlisting}

\item	Now, proceed to download and extract the desired VirtualBox virtual machine image onto the system from the \cernvm download 
		portal, url{http://cernvm.cern.ch/portal/downloads} it is recommended that you download the VirtualBox Desktop image for your 
		architecture. For this guide the Desktop image will be downloaded as it is the most practical image for the majority of 
		users.
		
\lstset{language=bash,caption=Download and Extract CernVM VirtualBox Desktop Image}
\begin{lstlisting}
$ wget http://rbuilder.cern.ch/downloadImage?fileId=1711
$ gunzip cernvm*.gz
\end{lstlisting}

\item 	Now, to ensure that VirtualBox is properly configured and installed, follow this guide provided on the CernVM website
		\url{http://cernvm.cern.ch/portal/vbinstallation} which provides step by step instructions.{\bf Again, ensure that you 
		ALWAYS start VirtualBox as the root account}.

\item	Furthermore the following VirtualBox options must also be applied, as they are specific to configuring a \cernvm test client.
\begin{itemize}
\item[a.]	Navigate to \verb|Settings -> System -> Motherboard| for boot order list, floppy disks are redundant nowadays so disable 
			floppy from the boot order list. Then, disable the option ``Enable absolute pointing device'', which is for tablets.
			
\item[b.]	Next, go to the option \verb|System -> Processor|, and ensure that the option ``Enable PAE/NX'' is disabled
			as it best left disabled for \cernvm images~\footnote{Physical Address Extension (PAE) is useful if you are running a 
			32-bit processor as this enables a 32-bit operating system to access to more than 4GB of memory}.
			
\item[c.] 	Now, go to the next option \verb|System -> Acceleration|, if your system supports VT-x or AMD-V it is {\bf HIGHLY} 
			recommended that you enable these options ``Enable Nested Paging'' and ``Enable VT-x/AMD-V'' for performance gains. 
			To verify that your system supports this execute the following command, the output should not be empty. 

\lstset{language=bash}
\begin{lstlisting}
egrep '(vmx|svm)' --color=always /proc/cpuinfo
\end{lstlisting}

\item[d.]	Next go the setting for ``Audio'', audio is mostly redundant and unnecessary for \cernvm, so disable the audio unless
			you explicitly require audio support.
			
\item[e.]	Finally, since virsh only supports console access through a serial port for LXC, Xen, QEMU/KVM, and UML, go to the
			setting ``Serial Ports'' and simply verify that all of the serial ports as disabled for VirtualBox.
\end{itemize}

\item	Now that the virtual machine has been created and configured verify that it is able to boot completely without crashing,
		\emph{you will be presented with a login screen when it has booted completely}. Then shutdown the virtual machine by clicking 
		``Actions'' from within the virtual machine and selecting `Shutdown'', after the virtual machine has shutdown close
		VirtualBox and then connect to the VirtualBox hypervisor and determine that you can view, start, and stop virtual machine.

\lstset{language=bash,caption=Verify VirtualBox Works with Virsh}
\begin{lstlisting}
$ su
$ virsh --connect vbox:///session

# Verify the virtualbox virtual machine is accessible
# Name of the virtual machine created should be listed
$ list --all

# Verify the virtual machine can be turned on/off
$ start <name of virtual machine>
# Wait about 2 minutes for the system to boot
$ shutdown <name of virtual machine>
\end{lstlisting}

\item	Finally, configure the the virtual machine network to automatically start when the system boots and then create an
		XML definition file of the virtual machine, which will be used later by the test scripts. In the following example 
		save the XML definition file with the same name as the virtual machine that was created, such as 
		\emph{cernvm-vbox-2.3.0.xml} so that it is easy to differentiate between multiple virtual machines for different
		hypervisors.

\lstset{language=bash,caption=Create XML Definition File and Configure Network}
\begin{lstlisting}
$ su

# Create virtual machine XML definition file
$ virsh --connect vbox:///session dumpxml <name of virtual machine> \
> <name of virtual machine>.xml

# Configure virsh network for VirtualBox
$ virsh --connect vbox:///session
$ net-start vboxnet0
$ net-autostart vboxnet0
\end{lstlisting}				
\end{enumerate}




\newpage
\subsection{Configuring the CernVM Image}
\label{sec:rhcernvmconfig}
\begin{enumerate}
\item 	The next steps involve configuring the CernVM image to integrate with virsh as well as the test suite, first
		start the virtual machine, execute the command to get the IP address of the CernVM image. Then follow this guide
		provided on the CernVM website on how to configure the CernVM image and create a new user using the web interface 
		\url{http://cernvm.cern.ch/portal/cvmconfiguration} and reboot the system, \emph{all virsh commands require root 
		privileges}.
		
\begin{lstlisting}
$ virsh start cernvm
# Wait about 2 minutes for the system to boot 
# Then get IP Address using the following command
$ arp -an
\end{lstlisting}

\item 	Now that the system has booted, login in to the system using SSH for the user you created using the CernVM web interface
\begin{lstlisting}
$ ssh <user you created>@cernvm-image-ipaddress
\end{lstlisting}

\item	Now that you are logged into the system through SSH, execute the following instructions to enable virsh console access.
		
\lstset{language=bash,caption=Enable Virsh Console Access}
\begin{lstlisting}
# Type the following command, and enter a root password you won't forget
$ sudo passwd root
# Change to the root account and enable console for root so that you can 
# login using virsh console
$ su

# Enable root login on tty
$ echo “ttyS0″ >> /etc/securetty

# Then add console=ttyS0 to the kernel parameter line in /etc/grub.conf
$ vi /etc/grub.conf

# Add getty to /etc/inittab file after all the other "tty" lines, 
# add the following line to /etc/inittab
s0:2345:respawn:/sbin/agetty -L 38400 ttyS0 vt100

\end{lstlisting}

\item 	Now, reboot and login to the system using virsh console and then simply type ``root'' and enter the password to login as the 
		root account, \emph{there will most likely not be any console display from the virtual machine until you press 
		enter after entering the password}, then enable root login through SSH using the following commands. {\bf To 
		disconnect from the virsh console and return to the host machine console, press CTRL + ]  which is ( \^~] )}
				
\lstset{language=bash,caption=Enable SSH Root Login}
\begin{lstlisting}
# Reboot the system and the console should now work
# Wait for it to completely shut off and turn on
$ virsh shutdown cernvm
$ virsh start cernvm

# Login as root using password you set with the passwd command
$ virsh console cernvm

# edit the file /etc/ssh/sshd_config and uncomment the line 
# PermitRootLogin yes	in order to enable root login
$ vi /etc/ssh/sshd_config

\end{lstlisting}

\item 	Next from the host machine \emph{ie. the machine you're currently using} enable automatic login as root 
		through ssh on the KVM guest, first ensure that the guest machine has been started.
		
\lstset{language=bash,caption=Enable Automatic SSH Root Login}
\begin{lstlisting}
# Restart the virtual machine wait for 
# it to completely shut off and turn on
$ virsh shutdown cernvm
$ virsh start cernvm

# Generate a public key, when prompted press enter for everything
$ ssh-keygen -t rsa

# Get the ip address of the running cernvm guest, as done previously
$ arp -an

# Next, run the following command to setup automatic login for ssh
# without having to type the password. When prompted for the password
# enter the password you just set previously
$ ssh-copy-id -i ~/.ssh/id_rsa.pub root@cernvm-image-ipaddress
		
# Disconnect, and try and login to the machine using ssh and ensure 
# that you can login as root without having to type the password
$ ssh root@cernvm-image-ipaddress
\end{lstlisting}

\item	If everything so far has worked, then the test client and CernVM image have been installed and configured properly,
		if you have any outstanding issues solve them before proceeding further, or go to the section ``Server Platform 		
		Setup''~\ref{sec:serversetup} as the \tapper~server does not require virtual machine creation and configuration.
\end{enumerate}


\newpage
\subsection{Setting up the Tapper Test Suite}
\label{sec:rhtestsuite}
\begin{enumerate}
\item 	{\bf Before proceeding any further ensure that you have all other test clients set up this far, and then proceed
		to follow the instructions for setting up and configuring the \tapper~server in the section ``Server Platform Setup''}		
		~\ref{sec:serversetup}.
		
\item 	Now that the \tapper~server has been installed and configured and the \tapper web interface and database have proven
		to be working, the next step is to verify that the test client can actually send a report to the \tapper~server in
		the form of a TAP file. After sending the TAP report to the server, ensure that the test client is working by viewing 
		the tapper reports in your browser at the following url: \url{http://localhost/tapper/reports}. You should now see a 
		report from the test client, there should be a report from a system named whatever the ``Tapper-Machine-Name'' in 
		demo\_report.tap was set as. \emph{For the example demo\_report.tap provided below it would be cernvm-rhtestclient}.
		\footnote{This is why a consistent hostname convention was emphasized earlier, as reports are often sorted and organized 
		based on hostnames}.
		
\lstset{language=bash,caption=Send a Basic Report to the \tapper~Server}
\begin{lstlisting}
# Save the following in a file named demo_report.tap
$ vi demo_report.tap

	1..2
	# Tapper-Suite-Name: Tapper-Deployment
	# Tapper-Suite-Version: 1.001
	# Tapper-Machine-Name: cernvm-rhtestclient
	ok - Hello test world
	ok - Just another description

# Send the report to the tapper server using netcat
$ cat demo_report.tap | nc -w10 cernvm-server 7357
\end{lstlisting}

\item 	Next, download a copy of tapper-autoreport and the CernVM Test Cases from the Google Code svn repository
		\cite{GCreleasetesting} and install the tapper-autoreport dependencies.
		
\lstset{language=bash,caption=Install \tapper~AutoReport and Dependencies}
\begin{lstlisting}
# Install subversion, required to checkout auto-tapper
$ yum install subversion

# Checkout a copy of auto-tapper and cernvm testcases
$ svn checkout http://cernvm-release-testing.googlecode.com/svn/\
trunk/tapper/tapper-autoreport/ cernvm-release-testing-read-only

# Install the missing dependencies
$ yum install perl-Module-CoreList
$ yum install perl-CPAN

# Install the required perl modules
$ cpan
$ install prove
$ install XML::XPath
\end{lstlisting}

\item	Now that that tapper-autoreport has been installed, configure the following variables in the script
		``cernvm-tests.sh'' according to your \tapper infrastructure setup.
\begin{itemize}
\item	OSNAME		- The operating system of the test client, such as ``Red Hat 5''
\item	VMNAME 		- The domain name of the virtual machine used earlier with virsh
\item	VM\_XML\_DEFINITION	- The location and name of cernvm virtual machine definition XML file used to create virtual machine
\item	HOSTNAME	- The hostname of the test client
\item	GUESTIP		- This is the IP address of the CernVM image
\item	TAPPER\_REPORT\_SERVER	- The hostname of the \tapper~Report~Server
\end{itemize}	

\item	Finally, now that tapper-autoreport has been installed and configured on the test client and the test client and \tapper~Server
		have proven to be working, the next step is to verify that tapper-autoreport works correctly and can actually send a report to 	
		the \tapper~server in the form of a TAP file. After the \cernvm Test Cases script, ``cernvm-tests.sh'' has completed and sent
		a TAP report to the server, ensure that the test client is working by viewing the tapper reports in your browser at the 
		following url: \url{http://localhost/tapper/reports}. You should now see new report from the test client, there should be a 
		report from a system with the same hostname\footnote{This is why a consistent hostname convention was emphasized earlier, as 
		reports are often sorted and organized based on hostnames}.

\lstset{language=bash,caption=Run \tapper-AutoReport for CernVM Test Cases}
\begin{lstlisting}
# Simply execute the script and wait for it to finish
./cernvm-tests.sh
\end{lstlisting}
\end{enumerate}




\newpage
\section{Debian Based Test Client Setup}
\subsection{Installing the system}
\label{sec:debianinstall}
\flushleft
\begin{enumerate}
\item 	First, begin by loading the Debian Squeeze CD and select the first `install' option at the initial boot menu.

\item	For the first few installation options, such as default language and keyboard layout simply leave the default values
		and press enter unless you have different requirements than the default options.

\item	When prompted to enter the hostname for the computer, enter a relevant hostname for the machine based on the hardware or 
		operating system it is running; the hostname should be relevant and unique as \tapper will use this hostname to identify the 
		system. A good naming convention should refer to the hardware or operating system and call it a host to differentiate from the 
		virtual machine that will be running as a guest\footnote{This will make more sense later when you have to create and configure 
		CernVM images}, for example a hostname such as \emph{cernvm-debian6-host} could be used, {\bf whatever convention you use make 
		sure it is consistent}.
the following
\item	Next, you will be prompted to enter a domain name, delete the preset domain name ``local'' and leave it blank, \emph{unless
		your network environment has specific domain name requirements}.

\item	Next, when prompted to enter the root password, set the root password to something you will not forget and is
		fairly difficult with numbers and letters. {\bf Again, whatever password you use,  make sure it's consistent as you will 	
		frequently use this account}.

\item 	Next, when prompted to enter a username for the new user to be created on the system, set the username as something simple and 
		relevant such as \emph{cernvm} and the password to something you will not forget and is fairly complex with numbers and letters. 
		But, most importantly {\bf keep this username and password consistent across all systems created as part of the infrastructure} 
		as it makes administration and everything else much easier.

\item 	When prompted for the timezone simply configure the timezone according to your local time zone, such as CEST

\item	Now, when prompted by the installer to configure the partitioning layout, if there are other operating systems installed on the 
		system select the ``Guided - use entire disk'' option, and if available select the option ``Use Remaining Free Space''. 
		Otherwise, if there are no other operating system installed on the hard drive select the ``Manual'' option, \emph{beware that 
		doing so will risk erasing everything on the hard drive if you create a new partition table}. Using the manual option, create 
		two primary partitions, with the first taking up the size of the hard drive minus twice the size of the amount of RAM installed, 
		and the second primary partition as a SWAP file using the remaining free space. The following is an example of what the partiton 
		layout would look like for a 40.0 GB hard drive with 2GB of ram.

\lstset{language=bash,caption=Manual Partition Layout Example}
\begin{lstlisting}
#1	PRIMARY	36.0 GB		B f	 EXT4	/
#2	PRIMARY	4.0  GB		  f	 SWAP	SWAP
\end{lstlisting}

\item 	When prompted to scan another CD or DVD, select {\bf No} unless the system does not have access to the internet, as all the 
		packages will be installed using a network mirror.

\item	When prompted to use a network mirror, select {\bf Yes} and select a mirror near your location and in a country with a reputable 
		connection/internet infrastructure such as (USA, Netherlands, Germany, France).

\item 	When prompted to choose software to install, select the following
\begin{itemize}
\item 	Graphical desktop environment
\item 	SSH Server
\item	Standard system utilities
\end{itemize}

\item 	When prompted to install the GRUB boot loader to the master boot record, select {\bf Yes}

\item	After that the system should soon complete the installation, after the installation has finished ensure that you reboot the 
		system and remove the CD so that the system does not load the CD again when it starts.
\end{enumerate}


\newpage
\subsection{Configuring the system}
\label{sec:debianconfig}
\begin{enumerate}
\item	After the system has booted remove the follow unnecessary startup applications by selecting from the menu  
		\verb|System -> Preferences -> Startup Applications|
\begin{itemize}
\item	bluetooth
\item	evolution alarm
\item	Gnome Login Sound
\item	print queue
\item	screensaver
\item	update notifier
\item	visual assistance/aid
\item	volume control
\item	any others you think are unnecessary based on your own discretion
\end{itemize}

\item Remove the follow unnecessary services by selecting from the menu \verb|System -> Administration -> Services|
\begin{itemize}
\item	alsa utils
\item	bluetooth
\item	CUPS
\item	exim4
\item	any others you think are unnecessary based on your own discretion
\end{itemize}

\item Next enable and configure remote desktop from the menu \verb|System -> Preferences -> Remote Desktop| and ensure
that the following options are configured
\begin{itemize}
\item	Enable the option ``Allow others to view your desktop''
\item	Enable the option ``Allow other users to control your desktop''
\item	Disable the option ``You must confirm access to this machine''
\end{itemize}

\item Next configure the system to login automatically at boot from the menu select \verb|System -> Administration -> Login Screen|
and then set it to login to the user account you created previously (such as cernvm) automatically.

\item Next, remove cd-rom support from sources.list, which is used by Debian for updates \footnote{And is a nuisance for any new user
as it forces you to find the CD and put it in the computer for the update to continue}, execute the following command with root privileges
and comment out any lines that start with ``deb cdrom'' by using a \#

\lstset{language=bash,caption=Removing CD-ROM Requirement for Updates}
\begin{lstlisting}
$ su -c "gedit /etc/apt/sources.list"
\end{lstlisting}

\item	Again, continue to edit /etc/apt/sources.list still with root privileges and ensure that each line ends with ``main 
		contrib non-free'', then save the file and do the following command with root privileges.

\lstset{language=bash,caption=Updating the System}
\begin{lstlisting}
$ su -c "apt-get update"
\end{lstlisting}

\item Next, configure the screen saver from the menu \verb|System -> Preferences -> Screensaver| and ensure that the following options are 
configured
\begin{itemize}
\item	Disable the option ``Lock screen when screensaver active''
\end{itemize}

\item 	The following instructions involve enabling headless support so that you can remote desktop to the machine without having a 
		monitor connected to the computer
\begin{itemize}
\item[a.] Edit the xorg.conf file and put the following in it

\lstset{language=bash,caption=Configuring Xorg for Headless Support}
\begin{lstlisting}
$ su -c "gedit /etc/X11/xorg.conf"

Section "Device"
Identifier "VNC Device"
Driver "vesa"
EndSection

Section "Screen"
Identifier "VNC Screen"
Device "VNC Device"
Monitor "VNC Monitor"
SubSection "Display"
Modes "1280x1024"
EndSubSection
EndSection

Section "Monitor"
Identifier "VNC Monitor"
HorizSync 30-70
VertRefresh 50-75
EndSection
\end{lstlisting}
	
\item[b.] Then edit grub and set the option ``nomodeset'', and proceed to update grub and reboot

\lstset{language=bash,caption=Configuring Grub for Headless Support}
\begin{lstlisting}
$ su -c "gedit /etc/default/grub"

GRUB_CMDLINE_LINUX="nomodeset"

$ su -c "update-grub"
\end{lstlisting}
\end{itemize}

\item	Now, reboot the machine, and ensure that the following work
\begin{itemize}
\item	It automatically boots up into the full desktop environment without having to login
\item	You have access to the machine using SSH and can login on the root account
\item	You have VNC access to the machine and can control the system using VNC	
\end{itemize}

\item	Finally, update the system from the menu \verb|System -> Administration -> Update Manager| and after it has 
		completed the updates reboot the system
\end{enumerate}


\newpage
\subsection{Installing and configuring the hypervisors}
\label{sec:debianhypervisor}
\begin{enumerate}
\item The first step is to install the hypervisor, start by installing kvm and virsh using the following command with root privileges

\lstset{language=bash,caption=Installing KVM and Virsh Support}
\begin{lstlisting}
$ su 	-c "apt-get install qemu-kvm libvirt-bin"
\end{lstlisting}

\item 	Now, proceed to download and extract the desired kvm virtual machine image onto the system from the CernVM download 		
		portal\footnote{The images can be obtained here: \url{http://cernvm.cern.ch/portal/downloads} it is recommended that you 
		download the KVM Basic image for your architecture}, for this guide the basic image will be downloaded as it is the most 
		practical image for the majority of users.

\lstset{language=bash,caption=Download and Extract CernVM KVM Basic Image}
\begin{lstlisting}
$ wget http://rbuilder.cern.ch/downloadImage?fileId=1719
$ gunzip cernvm*.gz
\end{lstlisting}

\item 	Now, to ensure that KVM is properly configured and installed, follow this guide provided on the CernVM website
		\url{http://cernvm.cern.ch/portal/kvm} {\bf except, instead use following virtual machine definition file to 
		create the virtual machine}. \emph{You will need to change the following XML tags in the configuration file accordingly}.
		
\begin{itemize}
\item \verb|<uuid>| by generating a uuid using the uuid command
\item \verb|<source file>| according to wherever you extracted the cernvm kvm image
\item \verb|<mac address>| not a necessity, but change it to something slightly different
\end{itemize}

\lstset{language=bash,caption=Create CernVM KVM Definition File}
\begin{lstlisting}
# Install uuid tool and generate uuid
$ su -c "apt-get install uuid"
$ uuid

# Create the cernvm.xml definition file and set the XML tags accordingly
$ gedit cernvm.xml

<domain type='kvm'>
  <name>cernvm</name>
  <uuid>b32147e7-9b89-dda9-b15d-53ba5f54f590</uuid>
  <memory>524288</memory>
  <currentMemory>524288</currentMemory>
  <vcpu>1</vcpu>
  <os>
    <type arch='x86_64' machine='pc-0.12'>hvm</type>
    <boot dev='hd'/>
  </os>
  <features>
    <acpi/>
    <apic/>
    <pae/>
  </features>
  <clock offset='utc'/>
  <on_reboot>restart</on_reboot>
  <on_crash>restart</on_crash>
  <devices>
    <emulator>/usr/bin/kvm</emulator>
    <disk type='file' device='disk'>
      <driver name='qemu' type='raw'/>
      <source file='/home/cernvm/image/cernvm-2.3.0-x86_64.hdd'/>
      <target dev='hda' bus='ide'/>
      <address type='drive' controller='0' bus='0' unit='0'/>
    </disk>
    <controller type='ide' index='0'>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' 
      function='0x1'/>
    </controller>
    <interface type='network'>
      <mac address='52:54:00:ca:d5:d3'/>
      <source network='default'/>
      <target dev='vnet0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' 
      function='0x0'/>
    </interface>
    <serial type='pty'>
      <target port='0'/>
    </serial>
    <console type='pty'>
      <target type='serial' port='0'/>
    </console>
    <input type='mouse' bus='ps2'/>
    <graphics type='vnc' port='-1' autoport='yes'/>
    <video>
      <model type='cirrus' vram='9216' heads='1'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x02'
      function='0x0'/>
    </video>
    <memballoon model='virtio'>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x04'
      function='0x0'/>
    </memballoon>
  </devices>
</domain>
\end{lstlisting}

\item	Finally, configure the the virtual machine network to automatically start when the system boots, then create 
		the virual machine and ensure that it can be started and stopped using virsh, \emph{all virsh commands require
		root privileges, so it easiest to simply run as as root}.

\lstset{language=bash,caption= Configure the Virtual Machine and Verify it Works}
\begin{lstlisting}
$ su
$ virsh net-autostart default
$ virsh define /home/cernvm/image/cernvm.xml

# Verify the virtual machine was added, should be in list
$ virsh list --all

# Verify the virtual machine can be turned on/off
$ virsh start cernvm
# Wait about 2 minutes for the system to boot
$ virsh shutdown cernvm
\end{lstlisting}
\end{enumerate}


\newpage
\subsection{Configuring the CernVM Image}
\label{sec:cernvmconfig}
\begin{enumerate}
\item 	The next steps involve configuring the CernVM image to integrate with virsh as well as the test suite, first
		start the virtual machine, execute the command to get the IP address of the CernVM image. Then follow this guide
		provided on the CernVM website on how to configure the CernVM image and create a new user using the web interface 
		\url{http://cernvm.cern.ch/portal/cvmconfiguration} and reboot the system, \emph{all virsh commands require root privileges}.

\begin{lstlisting}
$ virsh start cernvm
# Wait about 2 minutes for the system to boot 
# Then get IP Address using the following command
$ arp -an
\end{lstlisting}

\item Now that the system has booted, login in to the system using SSH for the user you created using the CernVM web interface
\begin{lstlisting}
$ ssh <user you created>@cernvm-image-ipaddress
\end{lstlisting}

\item	Now that you are logged into the system through SSH, execute the following instructions to enable virsh console access.
		
\lstset{language=bash,caption= Enable Virsh Console Access}
\begin{lstlisting}
# Type the following command, and enter a root password you won't forget
$ sudo passwd root
# Change to the root account and enable console for root so that you can 
# login using virsh console
$ su

# Enable root login on tty
$ echo “ttyS0″ >> /etc/securetty

# Then add console=ttyS0 to the kernel parameter line in /etc/grub.conf
$ vi /etc/grub.conf

# Add getty to /etc/inittab file after all the other "tty" lines, 
# add the following line to /etc/inittab
s0:2345:respawn:/sbin/agetty -L 38400 ttyS0 vt100

\end{lstlisting}

\item	Now, reboot and login to the system using virsh console and then simply type ``root'' and enter the password to login as the 
		root account, \emph{there will most likely not be any console display from the virtual machine until you press 
		enter after entering the password}, then enable root login through SSH using the following commands. {\bf To 
		disconnect from the virsh console and return to the host machine console, press CTRL + ]  which is ( \^~] )}
		
\lstset{language=bash,caption= Enable SSH Root Login}
\begin{lstlisting}
# Reboot the system and the console should now work
# Wait for it to completely shut off and turn on
$ virsh shutdown cernvm
$ virsh start cernvm

# Login as root using password you set with the passwd command
$ virsh console cernvm

# edit the file /etc/ssh/sshd_config and uncomment the line 
# PermitRootLogin yes	in order to enable root login
$ vi /etc/ssh/sshd_config
\end{lstlisting}

\item 	Next from the host machine \emph{ie. the machine you're currently using} enable automatic login as root 
		through ssh on the KVM guest, first ensure that the guest machine has been started.

\lstset{language=bash,caption=Enable Automatic SSH Root Login}
\begin{lstlisting}
# Restart the virtual machine wait for 
# it to completely shut off and turn on
$ virsh shutdown cernvm
$ virsh start cernvm

# Generate a public key, when prompted press enter for everything
$ ssh-keygen -t rsa

# Get the ip address of the running cernvm guest, as done previously
$ arp -an

# Next, run the following command to setup automatic login for ssh
# without having to type the password. When prompted for the password
# enter the root password you just set previously
$ ssh-copy-id -i ~/.ssh/id_rsa.pub root@cernvm-image-ipaddress
		
# Disconnect, and try and login to the machine using ssh and ensure 
# that you can login as root without having to type the password
$ ssh root@cernvm-image-ipaddress
\end{lstlisting}

\item	If everything so far has worked, then the test client and CernVM image have been installed and configured properly,
		if you have any outstanding issues solve them before proceeding further, or go to the section ``Server Platform 		
		Setup''~\ref{sec:serversetup} as the \tapper~server does not require virtual machine creation and configuration.
\end{enumerate}


\newpage
\subsection{Setting up the Tapper Test Suite}
\label{sec:debiantestsuite}
\begin{enumerate}
\item 	{\bf Before proceeding any further ensure that you have all other test clients set up this far, and then proceed
		to follow the instructions for setting up and configuring the \tapper~server in the section ``Server Platform Setup''}		
		~\ref{sec:serversetup}.
\end{enumerate}




\newpage
\section{OS X Test Client Setup}
\subsection{Installing the system}
\label{sec:osxinstall}

In most cases your Apple computer should have already came with the OS X operating system installed, but in case you need to
install the operating system manually, or perhaps you wish to install the latest operating system, such as Snow Leopard or Lion
the following instructions are provided. The following instructions outline the procedure for installing OS X on your Apple computer, 
if your Apple computer already came installed with one of the newer versions of OS X, then simply procede to the next section,
``Configuring the system''~\ref{sec:osxconfig}.

\begin{enumerate}
\item	First, begin by booting from the OS X installation CD and simply wait until it boots into the installation environment.

\item	Now that the installation CD has booted, the next procedure is to prepare the hard drive you with to install OS X on 
		for installation. From the menu at the top of the screen, select \verb|Utilties -> Disk Utility...| then from the left 
		pane, select the drive that you wish to install OS X on. Now, it is a bit unintuitive, but in order to format and parition 
		the drive so that it can be accessed by the OS X installer, you must click on the ``Erase'' tab, \emph{It is pretty self 
		explanatory, but this will erase everything on the hard drive}. Now, for the option ``Volume Format:'' from the drop down menu
		select ``Mac OS Extended (Journaled)'' \footnote{This is the optimal format to use as journaled file systems are the least likely
		filesystem to become corrupted}, then for the option ``Name:'' enter a name for the hard drive, \emph{this is not a name for the
		computer}, so simply enter a name in all capital letters such as \emph{CERNVM}. Finally, click the ``Erase...'' button to format
		the drive and prepare it for OS X installation.
		
\item	Now, go back to the OS X installer and read through and agree to the End User License Agreement, \emph{make sure you read through
		the EULA and agree to the terms}, then click the ``Agree'' button to continue the installation.
		
\item	Next, at the installation stage titled, ``Select a Destination'', click on the hard drive you formatted previously, as well 
		the name you entered for the drive when it was created should be listed below the hard drive icon, then click ``Continue''.
		
\item	At the next stage of the intallation titled, ``Install Summary'', if you wish to make customizations to the packages installed
		as part of the OS X system, click the ``Customize'' button, otherwise simply click the ``Install'' button to begin the
		installation of OS X.
		
\item	After the system reboots, you will be presented with a welcome screen, select your country from the list and then click
		``Continue''.
		
\item 	At the next installation stage, titled ``Select Your Keyboard'', chose a keyboard layout, it is probably best to just leave
		it at the default ``U.S.'' keyboard layout.
		
\item	At the next installation stage, titled ``Do You Already Own a Mac?'' simply select the option ``Do not transfer my information
		now'' and click ``Continue''.
		
\item	Next, for ``Enter Your Apple ID''\footnote{This is your iTunes and Apple store account, since this is a test client we won't
		be using iTunes} leave everything blank and simply click ``Continue''.
		
\item	Next for the ``Registration Information'', again just click ``Continue'' and if you are prompted by a message about ``Some
		of your registration information is missing'', just click ``Continue'' again.
		
\item	Now, at the next installation stage titled ``Create Your Account'', for the options ``Full Name'' and ``Account Name:''
		enter a name and account name that is simple and relevant such as \emph{cernvm} and set the password to something you will
		not forget and is fairly complex with numbers and letters. But, most importantly {\bf keep the username and password entered
		consistent across all systems created as part of the infrastructure} as it makes administration and everything else much easier. 
		
\item	Next for ``Select Time Zone'' click on your location on the map of the world to change the time zone, and then for the option
		``Closest City:'' select a city near your location.
		
\item	Finally, at the last stage of the installation click ``Done''.	
\end{enumerate}


\newpage
\subsection{Configuring the system}
\label{sec:osxconfig}

\begin{enumerate}
\item	After the system has booted, the first thing to configure are the power management settings and other preferences, as this system
		will be running as a test client, sleep and other automatic energy saving features must be disabled. Begin by navigating to the
		power options, \verb|Apple logo -> System Preferences -> Energy Saver| for the option ``Computer sleep'' slide the bar to the
		far right so that it is set to ``Never'' and ensure that the following options are all disabled.
\begin{itemize}
\item	Put the hard disk(s) to sleep when possible

\item	Wake for Ethernet network access

\item 	Allow power button to put the computer to sleep
\end{itemize}

\item	Next, set a hostname for the system from the menu \verb|Apple logo -> System Preferences -> Sharing| beside the ``Computer Name:''
		option at the top, click the ``Edit...'' button. Then enter a relevant hostname for the system based on the hardware or operating
		system it is running; the hostname should be relevant and unique to better identify the system. A good naming convention should 
		refer to the hardware or operating system and call it a host to differentiate from the virtual machine that will be running as 
		a guest, for example a hostname such as \emph{cernvm-osx-host} could be used, {\bf whatever convention you use make sure it is 
		consistent}.

\item	Next, enable SSH access to the system by navigating to \verb|Apple logo -> System Preferences -> Sharing| and from the list of 
		services that can be shared, enable ``Remote Login'', which is SSH.
		
\item	Now, to enable VNC access to the system, select from the same list of services that can be shared, ``Remote Management'' and
		for local access options window that appears, enable all of the options listed such as ``Observe'' and ``Change settings''.
		Then to enable VNC compatibilty so that the OS X system can be accessed by other non-Apple computers, click the ``Computer
		Settings...'' button and enable the following options and set a password for the ``VNC viewers...'' option.
\begin{itemize}
\item	Show Remote Management status in menu bar
\item	Anyone may request permission to control screen
\item	VNC viewers may control screen with password
\end{itemize}

\item	Now, to ensure that your user logs in automatically, navigate to \verb|Apple logo -> System Preferences -> Accounts| and click
		``Login Options'', you may have to click on the lock icon and enter your password in order to make changes to the login options. 
		Then for the option ``Automatic login:'' select your user from the list of accounts to enable automatic login.
		
\item 	Finally, to ensure that the settings were configured properly, reboot the machine and ensure that the following work.
\begin{itemize}
\item	It automatically boots up into the full desktop environment without having to login
\item	You have access to the machine using SSH and can login
\item	You have VNC access to the machine and can control the system using VNC	
\end{itemize}
\end{enumerate}




\newpage
\subsection{Installing libvirt and virsh}
\label{sec:osxvirsh}
\begin{enumerate}
\item	The virtualization API libvirt and the command line tool virsh~\cite{libvirt} are the essential components required 
		for setting up a test client and must be installed and properly configured before any testing can begin. Ensure that
		you follow the proceeding directions carefully and validate that virsh is working properly before proceeding to 
		install and configure the various hypervisors.

\item	First, to build libvirt from source Xcode must be installed, \url{http://developer.apple.com/xcode/}, Xcode 4 requires 
		either a paid developer membership, or must be purchased from the App Store; but, Xcode 3 is freely available, {\bf this 
		guide uses Xcode 3 to build libvirt from source}.

\item	Next, review the release news listed on the libvirt website, \url{http://libvirt.org/news.htm} and read 
		through the release notes for the latest version released to make sure that there are no regressions or deprecated 
		support for the platforms you wish to support. If you intend to set up a test client which supports VMware then you must 
		download a version later than \emph{0.8.7} as there was no support for VMware prior to that release.

\item	Next, download the latest source release that is a {\bf tar.gz} file from the libvirt release server, 
		\url{http://libvirt.org/sources/} based on the latest release which does not have any regressions or deprecations for
		the virtualization platforms you wish to support. As of this date, the latest release of libvirt is version 0.9.2, this 
		is the release that will be used for the following instructions and examples.
		
\item	Next, download and install the following dependencies which are required by libvirt, some of the newer releases are broken
		on OS X so the follow versions must be used. Before issuing make, configure each with \emph{--prefix=/usr/local} and for
		libgcrypt also add \emph{--disable-asm}.

\begin{itemize}
\item	libgpgerror-1.7	-	ftp://ftp.gnupg.org/gcrypt/libgpg-error/libgpg-error-1.7.tar.gz
\item	libgcrypt-1.4.5 -	ftp://ftp.gnupg.org/gcrypt/libgcrypt/libgcrypt-1.4.5.tar.gz
\item	gnutls-2.8.5 	-	ftp://ftp.gnu.org/pub/gnu/gnutls/gnutls-2.8.5.tar.bz2
\end{itemize}

\item	Next, configure and install libvirt using the following commands, which builds libvirt with support for VMware and
		VirtualBox.

\lstset{language=bash,caption=Configure and Install libvirt}
\begin{lstlisting}
# Configure libvirt with VMware/VirtualBox support
./configure --without-xen --without-sasl --without-avahi \
--without-polkit --without-qemu --without-lxc --without-openvz \
--without-remote --with-libvirtd --without-uml --with-vmware --with-vbox

# Build/install libvirt
sudo make
sudo make install
\end{lstlisting}	

\item 	Finally, ensure that virsh installed correctly and is running by connecting to the test hypervisor and ensuring 
		that the test virtual machine, named ``test'' is running.

\lstset{language=bash,caption=Verify virsh was Installed Properly}
\begin{lstlisting}
# Verify virsh is working, test should be running
$ virsh -c test:///default list --all
\end{lstlisting}
\end{enumerate}




\newpage
\subsection{Installing and configuring VirtualBox}
\label{sec:osxvbox}
\begin{enumerate}
\item	First, begin by downloading and installing the latest version of VirtualBox for OS X from the VirtualBox download 
		page, \url{http://www.virtualbox.org/wiki/Downloads} ensure that you select the appropriate architecture for your 
		system. The following instructions for this section of the guide uses VirtualBox 4.0.10 for AMD64.
		
\item	Next, to verify that VirtualBox has been installed properly and that virsh can connect to the VirtualBox hypervisor, 
		verify that the following VirtualBox kernel extensions are loaded and that you are able to connect to the virsh console 
		without any errors.
		
\begin{itemize}
\item	org.virtualbox.kext.VBoxDrv
\item	org.virtualbox.kext.VBoxUSB
\item	org.virtualbox.kext.VBoxNetFlt
\item	org.virtualbox.kext.VBoxNetAdp
\end{itemize}

\lstset{language=bash,caption=Verify that virsh can Access VirtualBox}
\begin{lstlisting}
# Verify that the kernel extentsions are loaded
$ kextstat | grep -i virtualbox

# Verify that virsh can connect to virtualbox
$ virsh -c vbox:///session
\end{lstlisting}

\item	Now, proceed to download and extract the desired VirtualBox virtual machine image onto the system from the \cernvm download 
		portal, \url{http://cernvm.cern.ch/portal/downloads} it is recommended that you download the VirtualBox Desktop image for your 
		architecture. For this guide the Desktop image will be downloaded as it is the most practical image for the majority of 
		users.

%\item  TODO: ADD INSTRUCTIONS ON EXECUTING THE SCRIPT WHICH WILL AUTOMATICALLY GENERATE AN XML DEFINTION FILE FOR THE VIRTUAL MACHINE
%		WITHOUT HAVING TO MANUALLY (AND TEDIOUSLY) GO THROUGH AND CONFIGURE THE VIRTUAL MACHINE AND CREATE AN XML FILE MANUALLY...
		

% THIS IS AUTOMATED ANYWAYS AND PART OF THE PRECONDITION TESTS, IT'S STILL GOOD TO MANUALLY MAKE SURE VIRTUAL IMAGE ACTUALLY WORKS
\item	Now that the virtual machine has been created and configured verify that it is able to boot completely without crashing,
		\emph{you will be presented with a login screen when it has booted completely}. Then shutdown the virtual machine by clicking 
		``Actions'' from within the virtual machine and selecting `Shutdown'', after the virtual machine has shutdown close
		VirtualBox and then connect to the VirtualBox hypervisor and determine that you can view, start, and stop virtual machine.

\lstset{language=bash,caption=Verify VirtualBox Works with Virsh}
\begin{lstlisting}
$ virsh --connect vbox:///session

# Verify the virtualbox virtual machine is accessible
# Name of the virtual machine created should be listed
$ list --all

# Verify the virtual machine can be turned on/off
$ start <name of virtual machine>
# Wait about 2 minutes for the system to boot
$ shutdown <name of virtual machine>
\end{lstlisting}

\item	Finally, configure the the virtual machine network to automatically start when the system boots.

\lstset{language=bash,caption=Configure Network}
\begin{lstlisting}
# Configure virsh network for VirtualBox
$ virsh --connect vbox:///session
$ net-start vboxnet0
$ net-autostart vboxnet0
\end{lstlisting}				
\end{enumerate}




\newpage
\subsection{Installing and configuring VMware}
\label{sec:osxvmware}
\begin{enumerate}
\item	First, begin by downloading and installing the latest version of VMware Fusion for OS X from the VMware product 
		page, \url{http://www.vmware.com/products/}, VMware Fusion requires a license, so you will have to purchase it
		in order to continue.
		
% VMWARE FUSION DOES NOT WORK WITH VIRSH, WHEN YOU CONNECT TO THE VIRSH CONSOLE VMWARE WINDOW LOADS IN AND YOU CANNOT
% EXECUTE ANY COMMANDS FROM WITHIN VIRSH, ONLY WAY TO FIX IT IS FOR ME TO START HACKING THE LIBVIRT CODE AND SUBMIT
% CHANGES BACK UPSTREAM ON THE MAILING LISTS, WHICH REQUIRES A LOT OF WORK AND READING THROUGH THE DEVELOPERS MANUAL
\item	Next, to verify that VMware Fusion has been installed properly, verify that the following VMware kernel extensions 
		are loaded, currently virsh has support to connect to the VMware hypervisor, but does not support interacting with
		VMware through VMware Fusion.
		
\begin{itemize}
\item	com.vmware.kext.vmx86
\item	com.vmware.kext.vmci
\item	com.vmware.kext.vmioplug
\item	com.vmware.kext.vmnet
\end{itemize}

\lstset{language=bash,caption=Verify VMware Kernel Extensions Loaded}
\begin{lstlisting}
# Verify that the kernel extentsions are loaded
$ kextstat | grep -i vmware
\end{lstlisting}

\item	Now, proceed to download and extract the desired VMware virtual machine image onto the system from the \cernvm download 
		portal, url{http://cernvm.cern.ch/portal/downloads} it is recommended that you download the VMware Desktop image for your 
		architecture. For this guide the Desktop image will be downloaded as it is the most practical image for the majority of 
		users.

%\item  TODO: ADD INSTRUCTIONS ON EXECUTING THE SCRIPT WHICH WILL AUTOMATICALLY GENERATE AN XML DEFINTION FILE FOR THE VIRTUAL MACHINE
%		WITHOUT HAVING TO MANUALLY (AND TEDIOUSLY) GO THROUGH AND CONFIGURE THE VIRTUAL MACHINE AND CREATE AN XML FILE MANUALLY...

\end{enumerate}




\newpage
\subsection{Installing and configuring the hypervisors}
\subsection{Configuring the CernVM Image}
\subsection{Setting up the Tapper Test Suite}